(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{6558:function(e,t,s){Promise.resolve().then(s.bind(s,7161))},7161:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(9268),o=s(5846),n=s.n(o),i=s(5577),a=s(6008),l=s(9700),c=s(4461),d=s(6006);function u(){let e=(0,a.useRouter)(),{access:t,setAccess:s,setRefresh:o,setProfile:u}=(0,c.LM)();(0,d.useEffect)(()=>{if(t)return e.push("/forum")},[t]);let{register:p,handleSubmit:f,formState:{errors:h}}=(0,l.cI)(),m=async t=>{let r=await (0,i.Z)("/api/v1/auth","POST",{username:t.username,password:t.password});if(r&&!r.errors){s(r.access_token),o(r.refresh_token);let t=await (0,i.Z)("/api/v1/users/me","GET");u(t.profile),e.push("/forum")}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("form",{onSubmit:f(m),className:"max-w-xl bg-base-100 mx-auto mt-12 rounded-lg overflow-hidden p-12 sm:py-20 sm:px-24 space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Weâ€™ve missed you!"}),(0,r.jsx)("p",{className:"text-lg",children:"More than 150 questions are waiting for your wise suggestions!"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"form-input",children:[(0,r.jsx)("input",{...p("username",{required:"This field is required"}),type:"text",placeholder:" "}),(0,r.jsx)("label",{for:"username",children:"Username"})]}),h.username&&(0,r.jsx)("div",{className:"text-error",children:h.username.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"form-input",children:[(0,r.jsx)("input",{...p("password",{required:"This field is required"}),type:"password",placeholder:" "}),(0,r.jsx)("label",{for:"password",children:"Password"})]}),h.password&&(0,r.jsx)("div",{className:"text-error",children:h.password.message})]}),(0,r.jsx)("button",{className:"btn btn-primary w-full",children:"Login"}),(0,r.jsx)(n(),{className:"link link-hover block",href:"/auth/forgot-password",children:"Forgot password?"})]})})}},6137:function(e,t,s){"use strict";var r=s(5577),o=s(730);t.Z={ListPost:e=>{let t="".concat("https://jsonserver-i5n0.onrender.com","/posts_list?_page=").concat(e,"&_limit=6"),{data:s,error:n,isLoading:i}=(0,o.ZP)(t,r.Z);return{posts:s,isLoading:i,isError:n}},GetDetailPost:e=>{let t="".concat("https://jsonserver-i5n0.onrender.com","/posts/").concat(e),{data:s,error:n,isLoading:i}=(0,o.ZP)(t,r.Z);return{post:s,isLoading:i,isError:n}},TotalPost:()=>(0,r.Z)("".concat("https://jsonserver-i5n0.onrender.com","/stats"))}},4461:function(e,t,s){"use strict";s.d(t,{qr:function(){return i},sK:function(){return l},LM:function(){return a}});var r=s(2561),o=s(4475),n=s(4328);let i=(0,r.Ue)((0,o.tJ)((e,t)=>({dark:!1,toggleDark:()=>e({dark:!t().dark}),sidebar:!1,toggleSidebar:()=>e({sidebar:!t().sidebar}),open:!1,openRequestModal:t=>e({open:t})}),{name:"forumApp",storage:(0,o.FL)(()=>n.Z)})),a=(0,r.Ue)((0,o.tJ)((e,t)=>({access:null,refresh:null,profile:{},setAccess:t=>e(()=>({access:t})),setRefresh:t=>e(()=>({refresh:t})),setProfile:t=>e(()=>({profile:t}))}),{name:"forumUser",storage:(0,o.FL)(()=>n.Z),onRehydrateStorage:e=>{n.Z.getItem("forumUser").then(t=>{t?e.setNoti(JSON.parse(t)):e.setNoti(JSON.parse([]))}).catch(e=>{})}})),l=(0,r.Ue)((0,o.tJ)((e,t)=>({noties:[],setNoti:t=>e(()=>({noties:t})),addNoti:t=>e(e=>{var s,r,o;return{noties:[{link:"/student",img:(null==t?void 0:null===(s=t.notification)||void 0===s?void 0:s.image)||"/avatar/kimthiendung.jpg",title:null==t?void 0:null===(r=t.notification)||void 0===r?void 0:r.title,body:null==t?void 0:null===(o=t.notification)||void 0===o?void 0:o.body,isSeen:!1},...e.noties]}})}),{name:"forumNoti",storage:(0,o.FL)(()=>n.Z),onRehydrateStorage:e=>{n.Z.getItem("forumNoti").then(t=>{t?e.setNoti(JSON.parse(t)):e.setNoti(JSON.parse([]))}).catch(e=>{})}}));var c=s(6137);(0,r.Ue)((e,t)=>({loading:!1,error:"",page:1,data:[],postsCount:0,setPage:t=>e(()=>({page:t})),fetchPostListPage:async t=>{try{e({loading:!0,page:t});let s=c.Z.ListPost(t,6),r=await c.Z.TotalPost();e({loading:!1,data:s,postsCount:r.postsCount})}catch(t){e({loading:!1,error:t})}}}))},4328:function(e,t,s){"use strict";var r=s(2486);t.Z={getItem:async e=>(0,r.U2)(e).then(e=>e).catch(e=>{}),setItem:async(e,t)=>{await (0,r.t8)(e,t)},removeItem:async e=>{await (0,r.IV)(e)}}},5577:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var r=s(4328);async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n={method:t?String(t||"").toUpperCase():"GET"};"GET"!==n.method&&(s.files?n.body=s.files:n.body=JSON.stringify(s||{})),n.headers={"Content-Type":"application/json",...o},s.files&&delete n.headers["Content-Type"];let i=await r.Z.getItem("forumUser");if(i){var a;let e=JSON.parse(i),t=null==e?void 0:null===(a=e.state)||void 0===a?void 0:a.access;t&&(n.headers.Authorization="Bearer ".concat(t))}return fetch(e,n).then(e=>e.json())}},5846:function(e,t,s){e.exports=s(7095)}},function(e){e.O(0,[7095,4753,730,5265,9253,7698,1744],function(){return e(e.s=6558)}),_N_E=e.O()}]);